<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>gKit2 light: src/gKit/mat.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">gKit2 light
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_1ea19073c48002bc098fde4d4682017d.html">gKit</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mat.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mat_8h.html">mat.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="group__math.html#gae08d7a912de986f024d228526248477f">    9</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>( <span class="keyword">const</span> <span class="keywordtype">float</span> deg ) </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;{</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    <span class="keywordflow">return</span> ((<span class="keywordtype">float</span>) M_PI / 180.f) * deg; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;}</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="group__math.html#ga72723366b21280b777c257c575f977ac">   14</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="group__math.html#ga72723366b21280b777c257c575f977ac">degrees</a>( <span class="keyword">const</span> <span class="keywordtype">float</span> rad )</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;{ </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="keywordflow">return</span> (180.f / (<span class="keywordtype">float</span>) M_PI) * rad; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;}</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">   20</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>( </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> t00, <span class="keyword">const</span> <span class="keywordtype">float</span> t01, <span class="keyword">const</span> <span class="keywordtype">float</span> t02, <span class="keyword">const</span> <span class="keywordtype">float</span> t03,</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> t10, <span class="keyword">const</span> <span class="keywordtype">float</span> t11, <span class="keyword">const</span> <span class="keywordtype">float</span> t12, <span class="keyword">const</span> <span class="keywordtype">float</span> t13,</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> t20, <span class="keyword">const</span> <span class="keywordtype">float</span> t21, <span class="keyword">const</span> <span class="keywordtype">float</span> t22, <span class="keyword">const</span> <span class="keywordtype">float</span> t23,</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> t30, <span class="keyword">const</span> <span class="keywordtype">float</span> t31, <span class="keyword">const</span> <span class="keywordtype">float</span> t32, <span class="keyword">const</span> <span class="keywordtype">float</span> t33 )</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;{</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="group__math.html#structTransform">Transform</a> m;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    m.m[0][0]= t00; m.m[0][1]= t01; m.m[0][2]= t02; m.m[0][3]= t03;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    m.m[1][0]= t10; m.m[1][1]= t11; m.m[1][2]= t12; m.m[1][3]= t13;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    m.m[2][0]= t20; m.m[2][1]= t21; m.m[2][2]= t22; m.m[2][3]= t23;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    m.m[3][0]= t30; m.m[3][1]= t31; m.m[3][2]= t32; m.m[3][3]= t33;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">return</span> m;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}    </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="group__math.html#gad6981726d5be8491a2607c9af06e3c13">   34</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gad6981726d5be8491a2607c9af06e3c13">make_identity</a>( )</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>(</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        1, 0, 0, 0,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        0, 1, 0, 0,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        0, 0, 1, 0,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        0, 0, 0, 1);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;}</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="group__math.html#ga3841f8865d12c04f002807c5d610b99e">   43</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#ga3841f8865d12c04f002807c5d610b99e">make_transpose</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; m )</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;{</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>(</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        m.m[0][0], m.m[1][0], m.m[2][0], m.m[3][0],</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        m.m[0][1], m.m[1][1], m.m[2][1], m.m[3][1],</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        m.m[0][2], m.m[1][2], m.m[2][2], m.m[3][2],</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        m.m[0][3], m.m[1][3], m.m[2][3], m.m[3][3]);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="group__math.html#gaadddf9c6546367cd936c53b5f2d97aef">   52</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gaadddf9c6546367cd936c53b5f2d97aef">make_normal_transform</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; m )</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#ga3841f8865d12c04f002807c5d610b99e">make_transpose</a>( <a class="code" href="group__math.html#ga9bb63ea061711a6153a30f7f8d01a6c4">make_inverse</a>(m) );</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="group__math.html#ga03a149d948286abcf8e000ba35c79194">   58</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#ga03a149d948286abcf8e000ba35c79194">make_scale</a>( <span class="keyword">const</span> <span class="keywordtype">float</span> x, <span class="keyword">const</span> <span class="keywordtype">float</span> y, <span class="keyword">const</span> <span class="keywordtype">float</span> z )</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>(</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        x, 0, 0, 0,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        0, y, 0, 0,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        0, 0, z, 0,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        0, 0, 0, 1);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="group__math.html#gae0ee4b6bb0592acf490f5a109554043c">   67</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gae0ee4b6bb0592acf490f5a109554043c">make_translation</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structVector">Vector</a>&amp; v )</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>(</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        1, 0, 0, v.x,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        0, 1, 0, v.y,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        0, 0, 1, v.z,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        0, 0, 0, 1);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="group__math.html#gac1c28ec2becfa4e685c56e7570c0940c">   76</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gac1c28ec2becfa4e685c56e7570c0940c">make_rotationX</a>( <span class="keyword">const</span> <span class="keywordtype">float</span> a )</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">float</span> sin_t= sinf(<a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>(a));</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">float</span> cos_t= cosf(<a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>(a));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>( </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        1,     0,      0, 0,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        0, cos_t, -sin_t, 0,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        0, sin_t,  cos_t, 0,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        0,     0,      0, 1 );</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="group__math.html#ga107a4a8239e4738e99cec5b3d3ffa0c2">   88</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#ga107a4a8239e4738e99cec5b3d3ffa0c2">make_rotationY</a>( <span class="keyword">const</span> <span class="keywordtype">float</span> a )</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">float</span> sin_t= sinf(<a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>(a));</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">float</span> cos_t= cosf(<a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>(a));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>(</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;         cos_t,   0, sin_t, 0,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;             0,   1,     0, 0,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        -sin_t,   0, cos_t, 0,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;             0,   0,     0, 1 );</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="group__math.html#gaba01c5d5a2ac8afaebe7e01e0cd6528a">  100</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gaba01c5d5a2ac8afaebe7e01e0cd6528a">make_rotationZ</a>( <span class="keyword">const</span> <span class="keywordtype">float</span> a )</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">float</span> sin_t= sinf(<a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>(a));</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">float</span> cos_t= cosf(<a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>(a));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>(</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        cos_t, -sin_t, 0, 0,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        sin_t,  cos_t, 0, 0,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            0,      0, 1, 0,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            0,      0, 0, 1 );</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="group__math.html#gadfe13072d768e0cb2adbfa6b91332f83">  112</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gadfe13072d768e0cb2adbfa6b91332f83">make_rotation</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structVector">Vector</a>&amp; axis, <span class="keyword">const</span> <span class="keywordtype">float</span> angle )</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="group__math.html#structVector">Vector</a> a= <a class="code" href="group__math.html#gae536ea1a67e0b896ceebfeff08b18d3d">normalize</a>(axis);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">float</span> s= sinf(<a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>(angle));</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">float</span> c= cosf(<a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>(angle));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>(</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        a.x * a.x + (1 - a.x * a.x ) * c,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        a.x * a.y * (1 - c ) - a.z * s,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        a.x * a.z * (1 - c ) + a.y * s,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        0,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        a.x * a.y * (1 - c ) + a.z * s,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        a.y * a.y + (1 - a.y * a.y ) * c,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        a.y * a.z * (1 - c ) - a.x * s,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        0,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        a.x * a.z * (1 - c ) - a.y * s,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        a.y * a.z * (1 - c ) + a.x * s,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        a.z * a.z + (1 - a.z * a.z ) * c,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        0,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        0, 0, 0, 1);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="group__math.html#gabe3912bb87fe404638aef5774545f93c">  138</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gabe3912bb87fe404638aef5774545f93c">make_perspective</a>( <span class="keyword">const</span> <span class="keywordtype">float</span> fov, <span class="keyword">const</span> <span class="keywordtype">float</span> aspect, <span class="keyword">const</span> <span class="keywordtype">float</span> znear, <span class="keyword">const</span> <span class="keywordtype">float</span> zfar )</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// perspective, openGL version</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">float</span> itan= 1 / tanf(<a class="code" href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a>(fov) * 0.5f);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordtype">float</span> <span class="keywordtype">id</span>= 1 / (znear - zfar);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>( </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        itan/aspect,    0,               0,                 0,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                  0, itan,               0,                 0,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                  0,    0, (zfar+znear)*<span class="keywordtype">id</span>, 2.f*zfar*znear*<span class="keywordtype">id</span>,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                  0,    0,              -1,                 0);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="group__math.html#gabfc4358e904a34fb5e50b091a8e84643">  151</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gabfc4358e904a34fb5e50b091a8e84643">make_viewport</a>( <span class="keyword">const</span> <span class="keywordtype">float</span> width, <span class="keyword">const</span> <span class="keywordtype">float</span> height )</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">float</span> w= width / 2.f;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">float</span> h= height / 2.f;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>(</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        w, 0,   0,   w,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        0, h,   0,   h,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        0, 0, .5f, .5f,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        0, 0,   0,   1);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="group__math.html#gaf961bb27b92a3f0eba638845497b98e6">  164</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gaf961bb27b92a3f0eba638845497b98e6">make_lookat</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structPoint">Point</a>&amp; from, <span class="keyword">const</span> <a class="code" href="group__math.html#structPoint">Point</a>&amp; to, <span class="keyword">const</span> <a class="code" href="group__math.html#structVector">Vector</a>&amp; up )</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="group__math.html#structVector">Vector</a> dir= <a class="code" href="group__math.html#gae536ea1a67e0b896ceebfeff08b18d3d">normalize</a>( <a class="code" href="group__math.html#gae9b735236284cd262282cc5ac7b5dc38">make_vector</a>(from, to) );</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="group__math.html#structVector">Vector</a> right= <a class="code" href="group__math.html#gae536ea1a67e0b896ceebfeff08b18d3d">normalize</a>( <a class="code" href="group__math.html#gaf70e8601a09ec83cf6748657fae04883">cross</a>(dir, <a class="code" href="group__math.html#gae536ea1a67e0b896ceebfeff08b18d3d">normalize</a>(up)) );</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="group__math.html#structVector">Vector</a> newUp= <a class="code" href="group__math.html#gae536ea1a67e0b896ceebfeff08b18d3d">normalize</a>( <a class="code" href="group__math.html#gaf70e8601a09ec83cf6748657fae04883">cross</a>(right, dir) );</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="group__math.html#structTransform">Transform</a> m= <a class="code" href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a>(</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        right.x, newUp.x, -dir.x, from.x,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        right.y, newUp.y, -dir.y, from.y,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        right.z, newUp.z, -dir.z, from.z,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        0,       0,        0,     1);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#ga9bb63ea061711a6153a30f7f8d01a6c4">make_inverse</a>(m);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="group__math.html#gaa1cd7c35b4d8d054e97c513cfa7aa871">  180</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gaa1cd7c35b4d8d054e97c513cfa7aa871">compose_transform</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; a, <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; b )</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="group__math.html#structTransform">Transform</a> m;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 4; i++)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 4; j++)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        m.m[i][j]= a.m[i][0] * b.m[0][j] + a.m[i][1] * b.m[1][j] + a.m[i][2] * b.m[2][j] + a.m[i][3] * b.m[3][j];</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> m;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="group__math.html#gad98ed437ce72f4ee34a5945adecb64e8">  190</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#gad98ed437ce72f4ee34a5945adecb64e8">operator* </a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; a, <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; b )</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gaa1cd7c35b4d8d054e97c513cfa7aa871">compose_transform</a>(a, b);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keyword">static</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="keywordtype">void</span> swapf( <span class="keywordtype">float</span>&amp; a, <span class="keywordtype">float</span>&amp; b )</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">float</span> c= a;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    a= b;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    b= c;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="group__math.html#ga9bb63ea061711a6153a30f7f8d01a6c4">  204</a></span>&#160;<a class="code" href="group__math.html#structTransform">Transform</a> <a class="code" href="group__math.html#ga9bb63ea061711a6153a30f7f8d01a6c4">make_inverse</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; m )</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">int</span> indxc[4], indxr[4];</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordtype">int</span> ipiv[4] = { 0, 0, 0, 0 };</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="group__math.html#structTransform">Transform</a> minv= m;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordtype">int</span> irow = -1, icol = -1;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordtype">float</span> big = 0.f;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// Choose pivot</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordflow">if</span> (ipiv[j] != 1) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; k++) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                    <span class="keywordflow">if</span> (ipiv[k] == 0) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                        <span class="keywordflow">if</span> (fabsf(minv.m[j][k]) &gt;= big) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                            big = fabsf(minv.m[j][k]);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                            irow = j;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                            icol = k;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                        }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ipiv[k] &gt; 1)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                        <a class="code" href="group__application.html#ga6efbb9298a8f73b9a17959b56ec20267">printf</a>(<span class="stringliteral">&quot;singular matrix in make_inverse()\n&quot;</span>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        assert(irow &gt;= 0 &amp;&amp; irow &lt; 4);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        assert(icol &gt;= 0 &amp;&amp; icol &lt; 4);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        ++ipiv[icol];</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">// Swap rows _irow_ and _icol_ for pivot</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">if</span> (irow != icol) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; ++k)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                swapf(minv.m[irow][k], minv.m[icol][k]);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        indxr[i] = irow;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        indxc[i] = icol;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span> (minv.m[icol][icol] == 0.)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <a class="code" href="group__application.html#ga6efbb9298a8f73b9a17959b56ec20267">printf</a>(<span class="stringliteral">&quot;singular matrix in make_inverse()\n&quot;</span>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">// Set $m[icol][icol]$ to one by scaling row _icol_ appropriately</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordtype">float</span> pivinv = 1.f / minv.m[icol][icol];</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        minv.m[icol][icol] = 1.f;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; j++)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            minv.m[icol][j] *= pivinv;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="comment">// Subtract this row from others to zero out their columns</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        for (<span class="keywordtype">int</span> j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">if</span> (j != icol) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                <span class="keywordtype">float</span> save = minv.m[j][icol];</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                minv.m[j][icol] = 0;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; k++)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    minv.m[j][k] -= minv.m[icol][k]*save;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// Swap columns to reflect permutation</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 3; j &gt;= 0; j--) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">if</span> (indxr[j] != indxc[j]) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; k++)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                swapf(minv.m[k][indxr[j]], minv.m[k][indxc[j]]);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">return</span> minv;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="group__math.html#ga74fc1e632f127f0aa98ad22d5f5f2bfa">  276</a></span>&#160;<a class="code" href="group__math.html#structvec4">vec4</a> <a class="code" href="group__math.html#ga74fc1e632f127f0aa98ad22d5f5f2bfa">transform</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; m, <span class="keyword">const</span> <a class="code" href="group__math.html#structvec4">vec4</a>&amp; v )</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordtype">float</span> x= v.x;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordtype">float</span> y= v.y;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordtype">float</span> z= v.z;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">float</span> w= v.w;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">float</span> xt= m.m[0][0] * x + m.m[0][1] * y + m.m[0][2] * z + m.m[0][3] * w;    <span class="comment">// dot(vec4(m[0]), v)</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">float</span> yt= m.m[1][0] * x + m.m[1][1] * y + m.m[1][2] * z + m.m[1][3] * w;    <span class="comment">// dot(vec4(m[1]), v)</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">float</span> zt= m.m[2][0] * x + m.m[2][1] * y + m.m[2][2] * z + m.m[2][3] * w;    <span class="comment">// dot(vec4(m[2]), v)</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">float</span> wt= m.m[3][0] * x + m.m[3][1] * y + m.m[3][2] * z + m.m[3][3] * w;    <span class="comment">// dot(vec4(m[3]), v)</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">return</span> make_vec4(xt, yt, zt, wt);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="group__math.html#ga627adaacd785f7eb86e167561d8daf7d">  291</a></span>&#160;<a class="code" href="group__math.html#structPoint">Point</a> <a class="code" href="group__math.html#ga74fc1e632f127f0aa98ad22d5f5f2bfa">transform</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; m, <span class="keyword">const</span> <a class="code" href="group__math.html#structPoint">Point</a>&amp; p )</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordtype">float</span> x= p.x;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordtype">float</span> y= p.y;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordtype">float</span> z= p.z;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">float</span> xt= m.m[0][0] * x + m.m[0][1] * y + m.m[0][2] * z + m.m[0][3];        <span class="comment">// dot(vec4(m[0]), vec4(p, 1))</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">float</span> yt= m.m[1][0] * x + m.m[1][1] * y + m.m[1][2] * z + m.m[1][3];        <span class="comment">// dot(vec4(m[1]), vec4(p, 1))</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordtype">float</span> zt= m.m[2][0] * x + m.m[2][1] * y + m.m[2][2] * z + m.m[2][3];        <span class="comment">// dot(vec4(m[2]), vec4(p, 1))</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordtype">float</span> wt= m.m[3][0] * x + m.m[3][1] * y + m.m[3][2] * z + m.m[3][3];        <span class="comment">// dot(vec4(m[3]), vec4(p, 1))</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    assert(wt != 0);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">float</span> w= 1 / wt;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span>(wt == 1) </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__math.html#ga2da35f841b3b72cbe484502421298e24">make_point</a>(xt, yt, zt);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__math.html#ga2da35f841b3b72cbe484502421298e24">make_point</a>(xt*w, yt*w, zt*w);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="group__math.html#ga9b6b5a97f26e047c05e2b33a475a4b63">  310</a></span>&#160;<a class="code" href="group__math.html#structVector">Vector</a> <a class="code" href="group__math.html#ga74fc1e632f127f0aa98ad22d5f5f2bfa">transform</a>( <span class="keyword">const</span> <a class="code" href="group__math.html#structTransform">Transform</a>&amp; m, <span class="keyword">const</span> <a class="code" href="group__math.html#structVector">Vector</a>&amp; v )</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">float</span> x= v.x;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">float</span> y= v.y;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">float</span> z= v.z;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordtype">float</span> xt= m.m[0][0] * x + m.m[0][1] * y + m.m[0][2] * z;        <span class="comment">// dot(vec4(m[0]), vec4(v, 0))</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordtype">float</span> yt= m.m[1][0] * x + m.m[1][1] * y + m.m[1][2] * z;        <span class="comment">// dot(vec4(m[1]), vec4(v, 0))</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordtype">float</span> zt= m.m[2][0] * x + m.m[2][1] * y + m.m[2][2] * z;        <span class="comment">// dot(vec4(m[2]), vec4(v, 0))</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                                                    <span class="comment">// dot(vec4(m[3]), vec4(v, 0)) == dot(vec4(0, 0, 0, 1), vec4(v, 0)) == 0 par definition</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__math.html#gae9b735236284cd262282cc5ac7b5dc38">make_vector</a>(xt, yt, zt);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="ttc" id="group__math_html_gaf961bb27b92a3f0eba638845497b98e6"><div class="ttname"><a href="group__math.html#gaf961bb27b92a3f0eba638845497b98e6">make_lookat</a></div><div class="ttdeci">Transform make_lookat(const Point &amp;from, const Point &amp;to, const Vector &amp;up)</div><div class="ttdoc">renvoie la matrice representant le placement et l&#39;orientation d&#39;une camera pour observer le point to...</div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00164">mat.cpp:164</a></div></div>
<div class="ttc" id="group__math_html_structPoint"><div class="ttname"><a href="group__math.html#structPoint">Point</a></div><div class="ttdoc">representation d&#39;un point 3d. </div><div class="ttdef"><b>Definition:</b> <a href="vec_8h_source.html#l00012">vec.h:12</a></div></div>
<div class="ttc" id="group__math_html_ga72723366b21280b777c257c575f977ac"><div class="ttname"><a href="group__math.html#ga72723366b21280b777c257c575f977ac">degrees</a></div><div class="ttdeci">float degrees(const float rad)</div><div class="ttdoc">conversion en degres. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00014">mat.cpp:14</a></div></div>
<div class="ttc" id="group__math_html_gae536ea1a67e0b896ceebfeff08b18d3d"><div class="ttname"><a href="group__math.html#gae536ea1a67e0b896ceebfeff08b18d3d">normalize</a></div><div class="ttdeci">Vector normalize(const Vector &amp;v)</div><div class="ttdoc">renvoie un vecteur unitaire / longueur == 1. </div><div class="ttdef"><b>Definition:</b> <a href="vec_8cpp_source.html#l00098">vec.cpp:98</a></div></div>
<div class="ttc" id="group__math_html_gad98ed437ce72f4ee34a5945adecb64e8"><div class="ttname"><a href="group__math.html#gad98ed437ce72f4ee34a5945adecb64e8">operator*</a></div><div class="ttdeci">Transform operator*(const Transform &amp;a, const Transform &amp;b)</div><div class="ttdoc">renvoie la composition des transformations a et b, t = a * b. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00190">mat.cpp:190</a></div></div>
<div class="ttc" id="group__math_html_gac1c28ec2becfa4e685c56e7570c0940c"><div class="ttname"><a href="group__math.html#gac1c28ec2becfa4e685c56e7570c0940c">make_rotationX</a></div><div class="ttdeci">Transform make_rotationX(const float a)</div><div class="ttdoc">renvoie la matrice representation une rotation de angle degree autour de l&#39;axe X. ...</div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00076">mat.cpp:76</a></div></div>
<div class="ttc" id="group__math_html_gae08d7a912de986f024d228526248477f"><div class="ttname"><a href="group__math.html#gae08d7a912de986f024d228526248477f">radians</a></div><div class="ttdeci">float radians(const float deg)</div><div class="ttdoc">conversion en radians. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00009">mat.cpp:9</a></div></div>
<div class="ttc" id="group__math_html_ga2da35f841b3b72cbe484502421298e24"><div class="ttname"><a href="group__math.html#ga2da35f841b3b72cbe484502421298e24">make_point</a></div><div class="ttdeci">Point make_point(const float x, const float y, const float z)</div><div class="ttdoc">cree un point de composantes x, y, z. </div><div class="ttdef"><b>Definition:</b> <a href="vec_8cpp_source.html#l00007">vec.cpp:7</a></div></div>
<div class="ttc" id="group__math_html_gadfe13072d768e0cb2adbfa6b91332f83"><div class="ttname"><a href="group__math.html#gadfe13072d768e0cb2adbfa6b91332f83">make_rotation</a></div><div class="ttdeci">Transform make_rotation(const Vector &amp;axis, const float angle)</div><div class="ttdoc">renvoie la matrice representation une rotation de angle degree autour de l&#39;axe axis. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00112">mat.cpp:112</a></div></div>
<div class="ttc" id="mat_8h_html"><div class="ttname"><a href="mat_8h.html">mat.h</a></div></div>
<div class="ttc" id="group__math_html_structVector"><div class="ttname"><a href="group__math.html#structVector">Vector</a></div><div class="ttdoc">representation d&#39;un vecteur 3d. </div><div class="ttdef"><b>Definition:</b> <a href="vec_8h_source.html#l00027">vec.h:27</a></div></div>
<div class="ttc" id="group__math_html_ga03a149d948286abcf8e000ba35c79194"><div class="ttname"><a href="group__math.html#ga03a149d948286abcf8e000ba35c79194">make_scale</a></div><div class="ttdeci">Transform make_scale(const float x, const float y, const float z)</div><div class="ttdoc">renvoie la matrice representant une mise a l&#39;echelle / etirement. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00058">mat.cpp:58</a></div></div>
<div class="ttc" id="group__math_html_gaa1cd7c35b4d8d054e97c513cfa7aa871"><div class="ttname"><a href="group__math.html#gaa1cd7c35b4d8d054e97c513cfa7aa871">compose_transform</a></div><div class="ttdeci">Transform compose_transform(const Transform &amp;a, const Transform &amp;b)</div><div class="ttdoc">renvoie la composition des transformations a et b, t= a * b. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00180">mat.cpp:180</a></div></div>
<div class="ttc" id="group__math_html_gaba01c5d5a2ac8afaebe7e01e0cd6528a"><div class="ttname"><a href="group__math.html#gaba01c5d5a2ac8afaebe7e01e0cd6528a">make_rotationZ</a></div><div class="ttdeci">Transform make_rotationZ(const float a)</div><div class="ttdoc">renvoie la matrice representation une rotation de angle degree autour de l&#39;axe Z. ...</div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00100">mat.cpp:100</a></div></div>
<div class="ttc" id="group__math_html_structTransform"><div class="ttname"><a href="group__math.html#structTransform">Transform</a></div><div class="ttdoc">representation d&#39;une transformation, une matrice 4x4. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8h_source.html#l00020">mat.h:20</a></div></div>
<div class="ttc" id="group__math_html_gad6981726d5be8491a2607c9af06e3c13"><div class="ttname"><a href="group__math.html#gad6981726d5be8491a2607c9af06e3c13">make_identity</a></div><div class="ttdeci">Transform make_identity()</div><div class="ttdoc">construit la transformation identite. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00034">mat.cpp:34</a></div></div>
<div class="ttc" id="group__math_html_ga3841f8865d12c04f002807c5d610b99e"><div class="ttname"><a href="group__math.html#ga3841f8865d12c04f002807c5d610b99e">make_transpose</a></div><div class="ttdeci">Transform make_transpose(const Transform &amp;m)</div><div class="ttdoc">renvoie la transposee de la matrice. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00043">mat.cpp:43</a></div></div>
<div class="ttc" id="group__math_html_gaadddf9c6546367cd936c53b5f2d97aef"><div class="ttname"><a href="group__math.html#gaadddf9c6546367cd936c53b5f2d97aef">make_normal_transform</a></div><div class="ttdeci">Transform make_normal_transform(const Transform &amp;m)</div><div class="ttdoc">renvoie la transformation a appliquer aux normales d&#39;un objet transforme par la matrice m...</div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00052">mat.cpp:52</a></div></div>
<div class="ttc" id="group__application_html_ga6efbb9298a8f73b9a17959b56ec20267"><div class="ttname"><a href="group__application.html#ga6efbb9298a8f73b9a17959b56ec20267">printf</a></div><div class="ttdeci">void printf(Text &amp;text, const int px, const int py, const char *format,...)</div><div class="ttdoc">affiche un texte a la position x, y. meme utilisation que printf(). </div><div class="ttdef"><b>Definition:</b> <a href="text_8cpp_source.html#l00137">text.cpp:137</a></div></div>
<div class="ttc" id="group__math_html_ga74fc1e632f127f0aa98ad22d5f5f2bfa"><div class="ttname"><a href="group__math.html#ga74fc1e632f127f0aa98ad22d5f5f2bfa">transform</a></div><div class="ttdeci">vec4 transform(const Transform &amp;m, const vec4 &amp;v)</div><div class="ttdoc">renvoie le point/vecteur homogene transforme. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00276">mat.cpp:276</a></div></div>
<div class="ttc" id="group__math_html_ga9bb63ea061711a6153a30f7f8d01a6c4"><div class="ttname"><a href="group__math.html#ga9bb63ea061711a6153a30f7f8d01a6c4">make_inverse</a></div><div class="ttdeci">Transform make_inverse(const Transform &amp;m)</div><div class="ttdoc">renvoie l&#39;inverse de la matrice. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00204">mat.cpp:204</a></div></div>
<div class="ttc" id="group__math_html_gaf70e8601a09ec83cf6748657fae04883"><div class="ttname"><a href="group__math.html#gaf70e8601a09ec83cf6748657fae04883">cross</a></div><div class="ttdeci">Vector cross(const Vector &amp;u, const Vector &amp;v)</div><div class="ttdoc">renvoie le produit vectoriel de 2 vecteurs. </div><div class="ttdef"><b>Definition:</b> <a href="vec_8cpp_source.html#l00104">vec.cpp:104</a></div></div>
<div class="ttc" id="group__math_html_gae0ee4b6bb0592acf490f5a109554043c"><div class="ttname"><a href="group__math.html#gae0ee4b6bb0592acf490f5a109554043c">make_translation</a></div><div class="ttdeci">Transform make_translation(const Vector &amp;v)</div><div class="ttdoc">renvoie la matrice representant une translation par un vecteur. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00067">mat.cpp:67</a></div></div>
<div class="ttc" id="group__math_html_gae9b735236284cd262282cc5ac7b5dc38"><div class="ttname"><a href="group__math.html#gae9b735236284cd262282cc5ac7b5dc38">make_vector</a></div><div class="ttdeci">Vector make_vector(const float x, const float y, const float z)</div><div class="ttdoc">cree un vecteur de composantes x, y, z. </div><div class="ttdef"><b>Definition:</b> <a href="vec_8cpp_source.html#l00025">vec.cpp:25</a></div></div>
<div class="ttc" id="group__math_html_gab1de56460024a34b4557bdd9e07fa473"><div class="ttname"><a href="group__math.html#gab1de56460024a34b4557bdd9e07fa473">make_transform</a></div><div class="ttdeci">Transform make_transform(const float t00, const float t01, const float t02, const float t03, const float t10, const float t11, const float t12, const float t13, const float t20, const float t21, const float t22, const float t23, const float t30, const float t31, const float t32, const float t33)</div><div class="ttdoc">construit la transformation. utilitaire. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00020">mat.cpp:20</a></div></div>
<div class="ttc" id="group__math_html_gabe3912bb87fe404638aef5774545f93c"><div class="ttname"><a href="group__math.html#gabe3912bb87fe404638aef5774545f93c">make_perspective</a></div><div class="ttdeci">Transform make_perspective(const float fov, const float aspect, const float znear, const float zfar)</div><div class="ttdoc">renvoie la matrice representant une transformation projection perspective. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00138">mat.cpp:138</a></div></div>
<div class="ttc" id="group__math_html_structvec4"><div class="ttname"><a href="group__math.html#structvec4">vec4</a></div><div class="ttdoc">vecteur generique 4d, ou 3d homogene, utilitaire. </div><div class="ttdef"><b>Definition:</b> <a href="vec_8h_source.html#l00097">vec.h:97</a></div></div>
<div class="ttc" id="group__math_html_ga107a4a8239e4738e99cec5b3d3ffa0c2"><div class="ttname"><a href="group__math.html#ga107a4a8239e4738e99cec5b3d3ffa0c2">make_rotationY</a></div><div class="ttdeci">Transform make_rotationY(const float a)</div><div class="ttdoc">renvoie la matrice representation une rotation de a degree autour de l&#39;axe Y. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00088">mat.cpp:88</a></div></div>
<div class="ttc" id="group__math_html_gabfc4358e904a34fb5e50b091a8e84643"><div class="ttname"><a href="group__math.html#gabfc4358e904a34fb5e50b091a8e84643">make_viewport</a></div><div class="ttdeci">Transform make_viewport(const float width, const float height)</div><div class="ttdoc">renvoie la matrice representant une transformation viewport. </div><div class="ttdef"><b>Definition:</b> <a href="mat_8cpp_source.html#l00151">mat.cpp:151</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 25 2016 11:09:27 for gKit2 light by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
